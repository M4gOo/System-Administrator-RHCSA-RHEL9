
sudo vim /etc/sudoers.d/<username>

by default RHEL server run sshd, ssh has access throught the firewall. But root access are denied using ssh

Defaults timestamp_type=global,timestamp_timeout=60

/etc/login.defs
/etc/skel/<create-the-file-for-the-users-when-created>

expiry date Y-M-D
chage

permissions 
            READ		WRITE			      EXECUTE
file        open		modify			      run
directory   list		create/delete		      cd

specific user for umask
 ~/.bashrc
 
 the default umask for all users
 /etc/bashrc 
 change the first umask in the shell script
 
 the default umask for root
 can be set in /etc/login.defs
 
 
RHEL9 slaac support (ipv6) 
radvd  #need to be installed

/etc/hosts
/etc/resolv.conf
/etc/nsswitch.conf

/etc/NetworkManager/system-connection      #configuration is stored
sudo yum -y install NetworkManager
systemctl enable NetworkManager --now

good to use nmtui in the exam rather than nmcli
make sure to check automatically connect and available to all users
make sure to deactivated and active again
add the ip and hostname to /etc/hosts

rpm -qa show all packages currently installed
rpm -qf /bin/ls

better to use DNF

dnf repolist           #check the repo list available
dnf provides */mkfs.vfat
rpm -qp --scripts httpd-...        # search for packages /etc/yum.repos.d/AppStream/Packages
dnf search all seinfo
dnf updatte kernel - update the old kernel and keep the old kernel as a backup

subscription-manager register     (you need be online)
user: <email_registered_in_redhatDeveloper>
subscription-manager attach     #to be registered


killall <type-process-name>

loginctl list-users
loginctl list-session
loginctl terminate-session

nice -n 10 sleep 6000 &

pkill -u <username>

systemctl list-units -t timer
systemctl list-unit-files
systemctl list-dependencies sshd
systemctl edit httpd        #[Service] Restart=always RestartSec=60s

systemctl enable atd --now

journalctl -p err
journalctl -u sshd.service    #shows messages for sshd only

 #making journal persistent
 create directory /var/log/journal
/etc/systemd/journal.conf
            #Storage=auto                       #make sure there is this option
 systemctl restart systemd-journald    OR journalctl --flush
            
Configuring rsyslogd
this is another loggin srvice on redhat
/etc/rsyslog.conf
systemctl enable rsyslogd


vim /etc/rsyslog.conf     #create an entry in rsyslog that writes all messages with severity of error 
*.err   /var/log/error
systemctl restart rsyslog.service
logger -p err hello     #to check cat /var/log/error
vi /etc/logrotate.conf              # rotated on a monthly basis


XFS is the default filesystem
fast and scalable
size can be increase, not decreased

EXT4 
size can be increased and decreased

VFAT offers multi-OS support
used for shared devices (like thumb drivers)

blkid - shows all devices with their naming attributes
mkfs.* -L    is used to set a label while creating fs
xfs_admin -L
tune2fs -L   (ext)

/etc/fstab    #this is for swap
/dev/sda1   none swap defaults 0 0               #can be swap, but nowadays use none
swapon -a
free -m

mount
for temporary use /mnt
findmnt
extended partition cannot be mounted, only logical partition inside the extended partition can be mounted

vgextend
lvextend -r -L +1G    if dont use the -r neet do use other commands like resize2fs (ext) and xfs_growfs (xfs)

reducing volume groups 
1- use pvmove     #pvmove -v /dev/sdb2 /dev/sdb1
2- vgreduce       #vgreduce volume_group_name /dev/sdb2


stratis - next generationb volume managin filesystem that uses thin provisioning by default 
implemented in user space, which makes API access possible. Important for container and cloud environment

stratis pool need a minimal 4G
stratisd stratis-cli
systemctl enable stratisd --now
in /etc/fstab defaults, x-systemd.requires=stratisd.service 0 0    #you dont need to add defaults

stratis fs snapshot mypool myfs myfs-snapshot
mkdir /mount/myfs-snapshot
mount dev/stratis/mypool/myfs-snap /mount/myfs-snapshot


cp /etc/[acf]* /myfiles/


persistent changes 
/etc/default/grub
then compile the changes in grub.cfg
grub2-mkconfig -o /boot/grub2/grug.cfg                      MBR system
grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg             EFI system

To know if you are in a MBR or EEFI system
lsblk
if your boot disc only as a boot partition
in a EFI you will see a separete vfat partition that is mounted /boot/efi

grub
in the grub loader -> systemd.unit=multi-user.target
in the emergency it will be only read-only file system
mount -o remount,rw /
ls /boot
mount -a


grub-loader
init=/bin/bash
mount -o remount,rw /
passwd root
touch /.autorelabel
exec /usr/lib/systemd/systemd


## enable debug shell  --- not good for security perspective
systemctl enable --now debug-shell.service
ctrl + alt +F9

ssh-keygen
ssh-copy-id
ssh client persistent    /etc/ssh/ssh_config or ~/.ssh/ssh_config
ssh -X <IP> <gedit>

for server /etc/ssh/sshd_config
port 22
PermitRootLogin yes
PubkeyAuthentication    enable by default
PasswordAuthentication
X11Forwarding   yes        allow to forward graphical sessions
AllowUsers <username>
After changes do systemctl restart sshd

scp or sftp
put /myfile
get /yourfile
exit to close an sftp session

rsync is using ssh to synchronize files
rsync -a * <IP>:/home/username
