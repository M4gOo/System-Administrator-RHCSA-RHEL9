
============================== Containers

sudo yum -y install @container-tools


------------------ Auto-starting Rootless Containers
1 - need a non-root user acc
  useradd <username>
  passwd <username>

2- enable linger
What is enable linger?
If enabled for a specific user, a user manager is spawned for the user at boot and kept around after logouts. 
This allows users who are not logged in to run long-running services.

  loginctl enable-linger <username>
  loginctl show-user linda        # verify Linger=yes

3 - Need to ssh to the user. It needs to be a real login, su doesn't work.
  ssh <username>@localhost
  
4 - Create a container
  podman run -d --name mynginx -p 8081:80 docker.io/library/nginx

5 - Generate a systemd unit file to autostart the container
   mkdir -p ~/.config/systemd/user
   cd ~/.config/systemd/user
   podman generate systemd --name mynginx --files
   cat container-mynginx.service          #check the content
   systemctl --user daemon-reload
   
6 - automatically start the user container on boot
  podman stop mynginx
  systemctl --user enable --now container-mynginx.service
  systemctl --user enable --now container-mynginx.service       # verify
  podman ps                                                     #verify the container
  
  
================================== Permissions

chmod 770 /path/{dir1,dir2}

you can only delete the file if you are the owner of the file, or the owner of the directory that contains the file.
when there is a stickybit!


================================== Managing Processes , NICE, RENICE

type & in the end
jobs command for check process in the background
fg <number> bring back the process to foreground
ctrl+z to pause the process 
bg to continue processes paused

----- Change process priority
start a process with different priprity
nice -n -8 dd if=/dev/zero of=/dev/null &


======================================= Check package

dnf provides */killall


========================================== SELinux

a package that is needed to do decent SELinux troubleshooting
yum -y install setroubleshoot-server

------------------Managing SELinux File Context

vi /etc/httpd/conf/httpd.conf
change DocumentRoot
<Directory>

SELinux messages are written with the audit label AVC: 
grep AVC /var/log/audit/audit.log | grep index.html

In some cases it's also useful to see if sealert has generated output. 
You'll find that in journalctl output: journalctl | grep sealert

ls -Z /var/www
ls -Z /web
semanage fcontext -a -t httpd_sys_content_t "/web(/.*)?"
restorecon -Rv /web





   
   
   
